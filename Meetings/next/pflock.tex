\documentclass{beamer}

\usefonttheme{professionalfonts} % using non standard fonts for beamer
\usefonttheme{serif} % default family is serif

\usepackage{enumitem}
\setitemize{label=\usebeamerfont*{itemize item}%
  \usebeamercolor[fg]{itemize item}
  \usebeamertemplate{itemize item}}

\usepackage{hyperref}
\usepackage{booktabs}
\usepackage{xfp}
\usepackage{graphicx}
\def\Put(#1,#2)#3{\leavevmode\makebox(0,0){\put(#1,#2){#3}}}
\usepackage{colortbl}
\usepackage{tikz}
\usepackage{amssymb}
\usepackage{enumerate}
\usepackage{arydshln}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{subcaption} %to have subfigures available

\usepackage[absolute,overlay]{textpos}

\colorlet{lightred}{red!25}
\colorlet{lightgreen}{green!25}
\beamertemplatenavigationsymbolsempty

\newcommand\blfootnote[1]{%
  \begingroup
  \renewcommand\thefootnote{}\footnote{#1}%
  \addtocounter{footnote}{-1}%
  \endgroup
}

\makeatletter

%% Textclass specific LaTeX commands.
\newcommand\makebeamertitle{\frame{\maketitle}}%
\AtBeginDocument{%
  \let\origtableofcontents=\tableofcontents
  \def\tableofcontents{\@ifnextchar[{\origtableofcontents}{\gobbletableofcontents}}
  \def\gobbletableofcontents#1{\origtableofcontents}
}
%% User specified LaTeX commands.
\usetheme{Malmoe}
\useoutertheme{infolines}
\addtobeamertemplate{headline}{}{\vskip2pt}
\setbeamercovered{transparent}

\title[PFlock report]{PFLOCK Report}
\author[AC]{Andres Calderon}
\institute[UCR]{University of California, Riverside}
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Main document
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
\makebeamertitle
\newif\iflattersubsect

\AtBeginSection[] {
    \begin{frame}<beamer>
    \frametitle{Outline} 
    \tableofcontents[currentsection]  
    \end{frame}
    \lattersubsectfalse
}

\AtBeginSubsection[] {
    \begin{frame}<beamer>
    \frametitle{Outline} 
    \tableofcontents[currentsubsection]  
    \end{frame}
}

\begin{frame}{Dataset}
    \centering
    \includegraphics[width=0.8\textwidth]{figures/dataset}
\end{frame}

\begin{frame}{Looking for best partitioning}{$\varepsilon=20$ and $\mu=3$}
    \centering
    \includegraphics[width=0.7\textwidth]{figures/Capacity/capacity}
\end{frame}

\begin{frame}{Looking for best partitioning}{$\varepsilon=20$ and $\mu=3$}
        \centering
        \begin{tikzpicture}
                \node[anchor=south west,inner sep=0] at (0,0) {\includegraphics[width=0.7\textwidth]{figures/Capacity/capacity}};
                \draw<1>[red,ultra thick,rounded corners] (4.4,0.75) rectangle (5.2,3.4);
        \end{tikzpicture}
\end{frame}


\begin{frame}{Exploring different threshold (pairs per cell)}{$\varepsilon=20$ and $\mu=3$}
        \centering
        \begin{tikzpicture}
                \foreach \i in {1,...,7} {
                        \def\j{\fpeval{9000 - \i * 1000}}
                        \node<\i>[] at (5,-0.25) {threshold=\j};
                        \node<\i>[anchor=south west,inner sep=0] at (0,0) {
                                \includegraphics[width=1.25\textheight]{figures/Cells/Cells\j}
                        };
                }
        \end{tikzpicture}
\end{frame}

\begin{frame}{Performance (???)}{$\varepsilon=20$, $\mu=3$}
        \centering
        \begin{figure}
                \includegraphics[width=0.7\textwidth]{figures/Density/density}
                \caption{Varying threshold from 2000 to 8000, comparing with no threshold (NA).}
        \end{figure}
\end{frame}

\begin{frame}{Performance (???)}{$\varepsilon=20$, $\mu=3$}
        \centering
        \begin{figure}
                \includegraphics[width=0.7\textwidth]{figures/Density/densityByStage}
                \caption{Varying threshold from 2000 to 8000, comparing with no threshold (NA).}
        \end{figure}
\end{frame}

\begin{frame}{Where the time goes...}{6 grids in the densest cell show the longest duration...}
        \centering
        \begin{tikzpicture}
                \node[anchor=south west,inner sep=0] at (0,0) {
                        \includegraphics[width=1.25\textheight]{figures/densest}
                };
                \draw<1>[blue,ultra thick] (4.35,3.27) rectangle (5.49,4.1);
        \end{tikzpicture}
\end{frame}

\begin{frame}{Detecting maximal duplicates, subsets and supersets}
        {Sum of time for each candidate to be evaluated...}
        \centering
        \begin{minipage}{0.49\textwidth}
                \includegraphics[width=\textwidth]{figures/Maximals/performanceBySum1}
        \end{minipage} %
        \begin{minipage}{0.49\textwidth}
                \includegraphics[width=\textwidth]{figures/Maximals/performanceBySum2}
        \end{minipage}
\end{frame}

\begin{frame}{Detecting maximal duplicates, subsets and supersets}
        {Average of time for each candidate to be evaluated...}
        \centering
        \begin{minipage}{0.49\textwidth}
                \includegraphics[width=\textwidth]{figures/Maximals/performanceByMean1}
        \end{minipage} %
        \begin{minipage}{0.49\textwidth}
                \includegraphics[width=\textwidth]{figures/Maximals/performanceByMean2}
        \end{minipage}
\end{frame}

\begin{frame}{Detecting maximal duplicates, subsets and supersets}{}
        \begin{table}[ht]
                \centering
                \begin{tabular}{rrrrr}
                        \toprule
                               & Number & Tree & Range &  \\
                        Cell & candidates & size & size & Position \\
                        \midrule
                        0 & 10393 & 258 & 170 & 77 \\
                        1 & 9579 & 231 & 167 & 84 \\
                        2 & 11994 & 276 & 166 & 78 \\
                        3 & 10765 & 251 & 170 & 87 \\
                        4 & 7974 & 204 & 123 & 64 \\
                        5 & 7936 & 188 & 126 & 61 \\
                        \bottomrule
                \end{tabular}
                \caption{Average size of tree index, query range and position where the candidate was detected (if
any).}
        \end{table}
\end{frame}

\begin{frame}{What is next?}
        \centering
        \begin{itemize}
                \item I think it is the best we can do under the given parameters...
                \item Explore the temporal dimension and evaluate 3D partitioners...
        \end{itemize}
%    \includegraphics[width=0.6\textwidth]{figures/}
\end{frame}

\end{document}

