#!/usr/bin/bash

# Create the network from OSM file...
netconvert -c dense.netccfg

# Extract polygon from OSM file to be included during the visualization...
polyconvert -c dense.polycfg

# Script to call 'randomTrips.py' and 'duarouter' to create random origin and destination,
# and then generate routes using shortest path algoritms...
# It creates routes for pedestrians, bicycles, motorcycles, cars, buses and trucks...
./dense_randomTrips 4000 0 120

# Run the simulation calling 'sumo' and save the trajectories to a XML file...
./simulate

# Convert the XML file to a TSV file with just ID of the object, lat and lon, speed and time instant...
python3 $SUMO_HOME/tools/xml/xml2csv.py -c dense_pedestrians.tsvcfg
./xml2tsv
